<!doctype html>
<html class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>load</title>
<link href="../../../images/logo-icon.svg" rel="icon" type="image/svg">    <script>var pathToRoot = "../../../";</script>
    <script>document.documentElement.classList.replace("no-js","js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async></script>
<script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async></script>
<link href="../../../styles/style.css" rel="Stylesheet">
<link href="../../../styles/main.css" rel="Stylesheet">
<link href="../../../styles/prism.css" rel="Stylesheet">
<link href="../../../styles/logo-styles.css" rel="Stylesheet">
<link href="../../../styles/font-jb-sans-auto.css" rel="Stylesheet">
<script type="text/javascript" src="../../../scripts/clipboard.js" async></script>
<script type="text/javascript" src="../../../scripts/navigation-loader.js" async></script>
<script type="text/javascript" src="../../../scripts/platform-content-handler.js" async></script>
<script type="text/javascript" src="../../../scripts/main.js" defer></script>
<script type="text/javascript" src="../../../scripts/prism.js" async></script>
<script type="text/javascript" src="../../../scripts/symbol-parameters-wrapper_deferred.js" defer></script></head>
<body>
    <div class="root">
<nav class="navigation" id="navigation-wrapper">
    <div class="navigation--inner">
        <div class="navigation-title">
            <button class="menu-toggle" id="menu-toggle" type="button">toggle menu</button>
            <div class="library-name">
<a class="library-name--link" href="../../../index.html">
                            Zipline
                    </a>            </div>
            <div class="library-version">1.16.0-SNAPSHOT
            </div>
        </div>
        <div class="filter-section" id="filter-section">
                <button class="platform-tag platform-selector common-like" data-active="" data-filter=":zipline-loader:dokkaHtmlPartial/commonMain">common</button>
        </div>
    </div>
    <div class="navigation-controls">
        <button class="navigation-controls--btn navigation-controls--theme" id="theme-toggle-button" type="button">switch theme</button>
        <div class="navigation-controls--btn navigation-controls--search" id="searchBar" role="button">search in API</div>
    </div>
</nav>
        <div id="container">
            <div class="sidebar" id="leftColumn">
                <div class="sidebar--inner" id="sideMenu"></div>
            </div>
            <div id="main">
<div class="main-content" data-page-type="member" id="content" pageids="zipline-loader::app.cash.zipline.loader/ZiplineLoader/load/#kotlin.String#app.cash.zipline.loader.FreshnessChecker#kotlinx.coroutines.flow.Flow[kotlin.String]#kotlinx.serialization.modules.SerializersModule#kotlin.coroutines.SuspendFunction1[app.cash.zipline.Zipline,kotlin.Unit]/PointingToDeclaration//-412860760">
  <div class="breadcrumbs"><a href="../../index.html">zipline-loader</a><span class="delimiter">/</span><a href="../index.html">app.cash.zipline.loader</a><span class="delimiter">/</span><a href="index.html">ZiplineLoader</a><span class="delimiter">/</span><span class="current">load</span></div>
  <div class="cover ">
    <h1 class="cover"><span><span>load</span></span></h1>
  </div>
  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":zipline-loader:dokkaHtmlPartial/commonMain"><div class="symbol monospace"><span class="token keyword">fun </span><a href="load.html"><span class="token function">load</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">applicationName<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html">String</a><span class="token punctuation">, </span></span><span class="parameter ">freshnessChecker<span class="token operator">: </span><a href="../-freshness-checker/index.html">FreshnessChecker</a><span class="token operator"> = </span>DefaultFreshnessCheckerNotFresh<span class="token punctuation">, </span></span><span class="parameter ">manifestUrlFlow<span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines.flow/Flow///PointingToDeclaration/">Flow</span><span class="token operator">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html">String</a><span class="token operator">&gt;</span><span class="token punctuation">, </span></span><span class="parameter ">serializersModule<span class="token operator">: </span><span data-unresolved-link="kotlinx.serialization.modules/SerializersModule///PointingToDeclaration/">SerializersModule</span><span class="token operator"> = </span>EmptySerializersModule()<span class="token punctuation">, </span></span><span class="parameter ">initializer<span class="token operator">: </span><span class="token keyword">suspend </span><span class="token punctuation">(</span><a href="../../../zipline/app.cash.zipline/-zipline/index.html">Zipline</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html">Unit</a><span class="token operator"> = </span>{}</span></span><span class="token punctuation">)</span><span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines.flow/Flow///PointingToDeclaration/">Flow</span><span class="token operator">&lt;</span><a href="../-load-result/index.html">LoadResult</a><span class="token operator">&gt;</span><span class="clearfix"><span class="floating-right">(<a href="https://github.com/cashapp/zipline/tree/trunk//zipline-loader/src/commonMain/kotlin/app/cash/zipline/loader/ZiplineLoader.kt#L237">source</a>)</span></span></div><p class="paragraph">Returns a flow of loaded applications.</p><p class="paragraph"></p><p class="paragraph">Local or Remote</p> ===============<p></p><p class="paragraph">If either caching or embedded code are enabled in this loader, this will attempt to load that local code. If the local code is fresh and loading it succeeds, the returned flow will finish.</p><p class="paragraph">Otherwise, this will load code from the network each time that <a href="load.html">manifestUrlFlow</a> emits. It will skip loads when the code is unchanged.</p><p class="paragraph"></p><p class="paragraph">Triggering Load Attempts</p> ========================<p></p><p class="paragraph">The <a href="load.html">manifestUrlFlow</a> should emit whenever a load attempt should be made. Some examples:</p><ul><li><p class="paragraph">If the URL to load the manifest from changes, as occurs when switching from development to     production code.</p></li><li><p class="paragraph">If hot-reloading is enabled, and a hot reload should be attempted because the code may have     changed.</p></li><li><p class="paragraph">If the most recent load attempt is <a href="../-load-result/-failure/index.html">LoadResult.Failure</a> and that load should be retried.</p></li></ul><p class="paragraph"></p><p class="paragraph">Loading Starts on Collect</p> =========================<p></p><p class="paragraph">The returned flow is a <i>cold</i> flow. No work will be performed unless there's a collect in flight.</p><p class="paragraph"></p><p class="paragraph">Skips, Failures and Successes</p> =============================<p></p><p class="paragraph">Each code update yields a few potential outcomes:</p><ul><li><p class="paragraph">Skipped, because the cached or embedded code is too old</p></li><li><p class="paragraph">Skipped, because the new code is the same as what's already loaded</p></li><li><p class="paragraph">Failed, due to a problem downloading a manifest</p></li><li><p class="paragraph">Failed, due to a problem downloading a binary</p></li><li><p class="paragraph">Failed, due to a crash initializing the code</p></li><li><p class="paragraph">Success</p></li></ul><p class="paragraph">Failures and success results are emitted to the returned flow.</p><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":zipline-loader:dokkaHtmlPartial/commonMain" data-filterable-set=":zipline-loader:dokkaHtmlPartial/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>manifest</span><wbr><span>Url</span><wbr><span><span>Flow</span></span></u></div></span></div><div><div class="title"><p class="paragraph">a flow that emits whenever by the downstream service.</p></div></div></div></div><div class="table-row" data-filterable-current=":zipline-loader:dokkaHtmlPartial/commonMain" data-filterable-set=":zipline-loader:dokkaHtmlPartial/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>freshness</span><wbr><span><span>Checker</span></span></u></div></span></div><div><div class="title"><p class="paragraph">checks if a cached ZiplineManifest is considered fresh. The default     value is <a href="../-default-freshness-checker-not-fresh/index.html">DefaultFreshnessCheckerNotFresh</a> which completely prevents the cache and embedded     code from being used.</p></div></div></div></div></div><hr><div class="symbol monospace"><span class="token keyword">fun </span><a href="load.html"><span class="token function"><strike>load</strike></span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">applicationName<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html">String</a><span class="token punctuation">, </span></span><span class="parameter ">manifestUrlFlow<span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines.flow/Flow///PointingToDeclaration/">Flow</span><span class="token operator">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html">String</a><span class="token operator">&gt;</span><span class="token punctuation">, </span></span><span class="parameter ">serializersModule<span class="token operator">: </span><span data-unresolved-link="kotlinx.serialization.modules/SerializersModule///PointingToDeclaration/">SerializersModule</span><span class="token operator"> = </span>EmptySerializersModule()<span class="token punctuation">, </span></span><span class="parameter ">initializer<span class="token operator">: </span><span class="token punctuation">(</span><a href="../../../zipline/app.cash.zipline/-zipline/index.html">Zipline</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html">Unit</a><span class="token operator"> = </span>{}</span></span><span class="token punctuation">)</span><span class="token operator">: </span><span data-unresolved-link="kotlinx.coroutines.flow/Flow///PointingToDeclaration/">Flow</span><span class="token operator">&lt;</span><a href="../-load-result/index.html">LoadResult</a><span class="token operator">&gt;</span><span class="clearfix"><span class="floating-right">(<a href="https://github.com/cashapp/zipline/tree/trunk//zipline-loader/src/commonMain/kotlin/app/cash/zipline/loader/ZiplineLoader.kt#L314">source</a>)</span></span></div><div class="deprecation-content"><h3 class="">Deprecated (with error)</h3><p class="paragraph">Deprecated, will be removed in 1.9</p><h4 class="">Replace with</h4><div class="sample-container"><pre><code class="monospace block lang-kotlin" theme="idea">load with FreshnessChecker in parameter list</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div><p class="paragraph">Downloads ZiplineManifest each time <a href="load.html">manifestUrlFlow</a> emits and loads Zipline with the newly downloaded ZiplineManifest, skipping loads if the code to load is the same as what's already loaded.</p><p class="paragraph">Always loads from network, never from local.</p><h4 class="">Parameters</h4><div class="table"><div class="table-row" data-filterable-current=":zipline-loader:dokkaHtmlPartial/commonMain" data-filterable-set=":zipline-loader:dokkaHtmlPartial/commonMain"><div class="main-subrow keyValue "><div class=""><span class="inline-flex"><div><u><span>manifest</span><wbr><span>Url</span><wbr><span><span>Flow</span></span></u></div></span></div><div><div class="title"><p class="paragraph">a flow that should emit each time a load should be attempted. This     may emit periodically to trigger polling. It should also emit for loading triggers like     app launch, app foregrounding, and network connectivity changed.</p></div></div></div></div></div></div></div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>© 2024 Copyright</span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
            </div>
        </div>
    </div>
</body>
</html>

